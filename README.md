# npm install


# npm run dev


## webpack + typescript + jquery + 面向对象编程

## 小方块类
- 只实现逻辑坐标和颜色
- 小方块的显示和移除交个一个了类去做（这个类要满足一个接口的约束）

## 小方块的显示类
- 实现小方块的显示。

> 上面这两个类：把数据和显示分离了，小方块类在哪里都可以显示，不用改动代码，复用性很高

## 方块组合类
- 一组相对坐标的组合形成不同的形状，一组坐标中有一个特殊的坐标表示形状的中心点（0,0），其他坐标相当于特殊坐标定位。
- 旋转要依靠中心点来旋转
- 根据形状和中心点的真实坐标可以得到所有点的真实坐标，在加上颜色，就可以设置小方块的数组了。
- 通过改变中心点的坐标来实现整体移动


## 俄罗斯方块的生产者
- 用于随机生成一个俄罗斯方块


## 俄罗斯方块规则类
1. 移动（边界判断，移动实现）

## 旋转功能
- 旋转的本质：根据当前形状产生一个新的形状
- 顺时针：x,y => -y,x 。逆时针：x,y => y, -x
- 田字形方块是不旋转的。一字形方块和S形方块旋转应该只有两种状态。
   - 解决办法：模板模式：旋转是一种通用实现，但是，不同情况下会有不同的实现，可以将SquareGroup作为父类，其他方块都是他的子类，子类可以重写父类方法。


---

## 游戏类
- 控制游戏的进程。如：方块下落、开始、暂停、下一个方块是什么。
- Game类清楚显示的切换，但不知道如何显示。

## 触底处理
- 自由下落和控制下落都会导致触底。
- 触底后做什么：切换方块、保存已落下的方块、根据保存的方块判断当前方块是否可以移动、消除方块、游戏是否结束
   - 如何保存：将当前的俄罗斯方块中**包含的小方块**保存到已存在的方块数组中。
   - 如何判断是否可以移动或者旋转：两层循环判断当前小方块如果移动后的坐标数组，与保存的小方块数组是否有相同的。如果有相同的则不能移动。
   - 消除方块：某一行的方块数量===界面的宽（根据y坐标，找到所有的保存的方块对象中对应该y坐标的，进行判断）。这一行从界面上移除，从保存的数组中移除，y坐标比此时y小的小方块，都y坐标+1。
   - 游戏是否结束：


## 积分

## 游戏界面

### webpack-dev-server
- webpack-dev-server在运行时，如果新定义了类型并使用了该类型，会导致编译失败。这时需要配置webpack.config.js中ts-loader。给他一个参数transpileOnly：true

### 使用的设计模式
- 单例模式
- 模板模式
- 显示和数据分离

### 用到的原则
- 单一职责原则
- 开闭原则


### 高内聚，低耦合
- 高内聚：一个类的功能要做的完整，不要让其他类去做
- 低耦合：类与类的联系越少越好 